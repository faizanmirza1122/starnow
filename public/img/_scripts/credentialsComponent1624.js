/*! For license information please see credentialsComponent.js.LICENSE?x=ef8dc19defd2a20938d6 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{111:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return i})),t.d(a,"d",(function(){return l}));var n=t(13);function r(){var e=document.getElementById("credentialsContainer");e&&(e.style.display="none")}function s(){var e=document.getElementById("credentialsContainer");e&&(e.style.display="")}function i(e,a){$(".js-firstname").val(e),$(".js-lastname").val(a)}function l(e){var a=new Array;return e.length<8&&(a=a.concat(n.e.NotLongEnough)),new RegExp("^(?=.*?[A-Za-z])").test(e)||(a=a.concat(n.e.NotEnoughLetter)),new RegExp("^(?=.*[0-9])").test(e)||(a=a.concat(n.e.NotEnoughNumericalChars)),a}},13:function(e,a,t){"use strict";var n,r,s;t.d(a,"c",(function(){return n})),t.d(a,"d",(function(){return r})),t.d(a,"a",(function(){return s})),t.d(a,"e",(function(){return l})),t.d(a,"b",(function(){return i})),function(e){e[e.Default=0]="Default",e[e.Talent=1]="Talent",e[e.AdvertiserPlaceListing=2]="AdvertiserPlaceListing",e[e.WhiteLabel=3]="WhiteLabel",e[e.PlaceNotice=4]="PlaceNotice"}(n||(n={})),function(e){e[e.NotDefined=0]="NotDefined",e[e.EmailIsTaken=1]="EmailIsTaken",e[e.InvalidEmail=2]="InvalidEmail",e[e.UnknownError=3]="UnknownError",e[e.ValidEmail=4]="ValidEmail",e[e.InvalidConnection=5]="InvalidConnection"}(r||(r={})),function(e){e[e.Unknown=0]="Unknown",e[e.Backstage=1]="Backstage",e[e.Mandy=2]="Mandy",e[e.BackstageMandy=3]="BackstageMandy"}(s||(s={}));var i,l={NotLongEnough:"NotLongEnough",NotEnoughNumericalChars:"NotEnoughNumericalChars",NotEnoughLetter:"NotEnoughLetter",WasCommonPassword:"WasCommonPassword",ValidPassword:"ValidPassword"};!function(e){e[e.Modal=0]="Modal",e[e.Mobile=1]="Mobile"}(i||(i={}))},1388:function(e,a,t){e.exports=t(430)},269:function(e,a,t){"use strict";var n=t(1),r=t(0),s=t(3),i=t.n(s),l=t(13),o=t(90),c=t(43),d=t(57),u=t(38),m=t(63),p=t(6);a.a=function(e){var a=Object(n.e)(Object(d.a)({password:"",invalidCredentials:!1,isOpen:!0}),2),t=a[0],s=a[1],g=Object(n.e)(Object(r.useState)(!1),2),E=g[0],f=g[1],h=function(){return e.credentialsSignInType==l.b.Modal?"f7":"f7 txt-white"};return r.createElement("div",{className:"pb3 ph6-ns pb6-ns"},r.createElement("div",{className:"box box--white-transparent box--rounded pa3"},r.createElement("div",{className:"flex flex-column flex-row-ns items-center justify-center box box--no-pad box--rounded box--white"},r.createElement("img",{src:"/images/register/starnow-logo.svg",className:"mv2 mv0-ns mh2"}),e.accountType!=l.a.Mandy&&r.createElement("img",{src:"/images/register/backstage-logo.svg",className:"mv2 mv0-ns mh2"}),e.accountType!=l.a.Backstage&&r.createElement("img",{src:"/images/register/mandy-logo.svg",className:"mv2 mv0-ns mh2"})),r.createElement("div",{className:"mt3 mt5-ns"},r.createElement("h2",{className:"f5"},"Looks like you already have a ",o.b[e.accountType]," account."),r.createElement("p",{className:"mt3"},"StarNow",o.a[e.accountType]," are now part of the same family and share the same login details. Use those details to continue to sign up on StarNow."))),r.createElement("div",{className:e.credentialsSignInType==l.b.Modal?"mt5 ph3":"mt5"},r.createElement("fieldset",{className:"fieldset"},r.createElement("label",{className:h()},"Email address"),r.createElement("span",{className:"fw7 break-long-words"},e.emailAddress),r.createElement("a",{className:e.credentialsSignInType==l.b.Modal?"ml2":"ml2 txt-white txt-underline",onClick:e.onChangeEmail},"change")),r.createElement("fieldset",{className:i()("fieldset","pt2",{"field-validation-error":t.invalidCredentials&&e.credentialsSignInType==l.b.Modal})},r.createElement("label",{className:h()},"Password you use on ",o.b[e.accountType]),r.createElement("input",{name:"PasswordModal",type:"password",autoComplete:"email",className:e.credentialsSignInType==l.b.Mobile&&t.invalidCredentials?"input-clean input-clean--with-error pr7 mt1":"input-clean pr7 mt1",autoFocus:!0,value:t.password,onChange:function(e){return s({password:e.target.value})}}),t.invalidCredentials&&r.createElement(c.b,{errorTextClassName:e.credentialsSignInType==l.b.Mobile?"txt-white":"txt-red",errorMessage:"Sorry, wrong password"})),r.createElement("div",{className:"txt-center mt3 mt6-ns"},r.createElement(m.a,{isLoading:E,onClick:function(a){return Object(n.b)(void 0,void 0,void 0,(function(){var r;return Object(n.d)(this,(function(n){switch(n.label){case 0:a.preventDefault(),n.label=1;case 1:return n.trys.push([1,3,,4]),f(!0),[4,Object(u.f)(e.starNowApiUrl,e.emailAddress,t.password)];case 2:return r=n.sent(),e.onSuccessfulAuthentication(t.password,r.firstName,r.lastName),[3,4];case 3:return n.sent(),s({invalidCredentials:!0}),f(!1),[3,4];case 4:return[2]}}))}))},tabIndex:3,isDisabled:t.password.length<3,label:"Continue",buttonColour:e.credentialsSignInType==l.b.Modal?p.a.Green:p.a.Charcoal}))))}},270:function(e,a,t){"use strict";var n=t(0),r=t(43),s=t(90);a.a=function(e){return n.createElement("ul",{className:"mt2 mb0"},e.validationErrors.map((function(a){var t,i;return n.createElement("li",{key:a},n.createElement(r.b,{errorTextClassName:(t=e.errorTextClassName,null!=t?t:"txt-red"),errorMessage:(i=s.c.get(a),null!=i?i:a)}))})))}},430:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t(0),s=t(18),i=t(43),l=t(57),o=t(38),c=t(35),d=t(3),u=t.n(d),m=t(62),p=t(34),g=t(13),E=t(269),f=function(e){return r.createElement(p.default,{className:"modal--white-bg",title:"",isOpen:!0,onRequestClose:function(){return e.onRequestClose()},size:2,shouldCloseOnOverlayClick:!1},r.createElement(E.a,{accountType:e.accountType,emailAddress:e.emailAddress,starNowApiUrl:e.starNowApiUrl,onChangeEmail:function(){return e.onRequestClose(),!1},onSuccessfulAuthentication:e.onSuccessfulAuthentication,credentialsSignInType:g.b.Modal}))},h=f;Object(s.a)(f,"SharedCredentialsSignInModal");var b=t(111),v=t(90),w=t(270),y=function(e){Object(r.useEffect)((function(){Object(n.b)(void 0,void 0,void 0,(function(){return Object(n.d)(this,(function(a){switch(a.label){case 0:return void 0===e.triggerValidation?[2]:t.isComponentLoaded?t.emailError!==g.d.NotDefined?[3,2]:[4,T(!0)]:[3,3];case 1:a.sent(),a.label=2;case 2:return t.emailError===g.d.ValidEmail&&k(),[3,5];case 3:return t.emailError!==g.d.ValidEmail?[3,5]:[4,T(!0)];case 4:a.sent(),a.label=5;case 5:return[2]}}))}))}),[e.triggerValidation]),Object(r.useEffect)((function(){t.isComponentLoaded&&s({emailError:e.emailValidationError,isBackstageAuthenticated:!1})}),[e.emailValidationError]),Object(r.useEffect)((function(){if(t.isComponentLoaded){if(null===e.passwordValidationResult)return;s({passwordValidationResult:e.passwordValidationResult,hasPasswordError:null!=e.passwordValidationResult&&e.passwordValidationResult.length>0}),e.passwordValidationResult.length>0||t.isBackstageAuthenticated&&s({isBackstageAuthenticated:!1})}}),[e.passwordValidationResult]);var a=Object(n.e)(Object(l.a)({emailError:e.emailValidationError,hasPasswordError:e.hasPasswordError,passwordValidationResult:e.passwordValidationResult,emailAddress:e.emailAddress,password:e.password,isBackstageAuthenticated:e.isBackstageAuthenticated,isLoading:!1,openSignInModal:!1,isComponentLoaded:!1,accountType:g.a.Unknown}),2),t=a[0],s=a[1],d=Object(n.e)(Object(r.useState)(!1),2),p=d[0],E=d[1],f=Object(n.e)(Object(r.useState)(e.emailAddress),2),y=f[0],C=f[1],k=function(){var e=Object(b.d)(t.password);s({hasPasswordError:e.length>0,passwordValidationResult:e})},A=function(){return Object(n.b)(void 0,void 0,void 0,(function(){return Object(n.d)(this,(function(e){return T(!1),[2]}))}))},T=function(a){return Object(n.b)(void 0,void 0,void 0,(function(){var r;return Object(n.d)(this,(function(n){switch(n.label){case 0:if(!a&&""===t.emailAddress)return s({emailError:t.emailError===g.d.NotDefined?g.d.NotDefined:g.d.InvalidEmail,isLoading:!1}),[2];s({isLoading:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Object(o.c)(e.global.starNowApiUrl,t.emailAddress)];case 2:switch(r=n.sent(),s({isLoading:!1}),r){case o.a.EmailAlreadyTaken:return[2,s({emailError:g.d.EmailIsTaken})];case o.a.Invalid:return[2,s({emailError:g.d.InvalidEmail})];case o.a.NotInUse:return[2,s({emailError:g.d.ValidEmail})];case o.a.BackstageUser:return[2,s({openSignInModal:!0,accountType:g.a.Backstage,emailError:g.d.NotDefined})];case o.a.MandyUser:return[2,s({openSignInModal:!0,accountType:g.a.Mandy,emailError:g.d.NotDefined})];case o.a.BackstageMandyUser:return[2,s({openSignInModal:!0,accountType:g.a.BackstageMandy,emailError:g.d.NotDefined})];default:throw new Error("Response not handled")}return[3,4];case 3:return n.sent(),s({isLoading:!1,emailError:g.d.UnknownError}),[3,4];case 4:return[2]}}))}))},M=function(){s({openSignInModal:!1,emailAddress:"",password:"",emailError:g.d.NotDefined,hasPasswordError:!1,isBackstageAuthenticated:!1,accountType:g.a.Unknown}),C(t.emailAddress),x(t.emailAddress),e.onEmailChange&&e.onEmailChange(""),e.onPasswordChange&&e.onPasswordChange(""),e.onBackstageIntegrationChange&&e.onBackstageIntegrationChange(!1,"",""),Object(b.b)(),Object(b.c)("","")};Object(r.useEffect)((function(){if(!t.isComponentLoaded)return t.isBackstageAuthenticated&&Object(b.a)(),void s({isComponentLoaded:!0});var e=setTimeout((function(){return A()}),2e3);return function(){return clearTimeout(e)}}),[y]);var L=Object(n.e)(Object(r.useState)(e.emailAddress),2),P=L[0],x=L[1];Object(r.useEffect)((function(){if(t.isComponentLoaded){var e=setTimeout((function(){return s({isLoading:!0})}),1e3);return function(){return clearTimeout(e)}}}),[P]);var I=function(){return t.emailError!==g.d.NotDefined&&t.emailError!==g.d.ValidEmail},O=function(a){return u()(a,{"input-half":e.displayType!==g.c.AdvertiserPlaceListing},{"input-full":e.displayType==g.c.AdvertiserPlaceListing})},j=function(a){return a?u()({"input-clean":e.displayType==g.c.AdvertiserPlaceListing,"input-clean--with-error":e.displayType==g.c.AdvertiserPlaceListing&&I()}):u()({"input-clean":e.displayType==g.c.AdvertiserPlaceListing,"input-clean--with-error":e.displayType==g.c.AdvertiserPlaceListing&&t.hasPasswordError})},B=function(a){return u()({"txt-stone":e.displayType==g.c.AdvertiserPlaceListing,hidden:e.displayType==g.c.WhiteLabel,help:a,"copy__h2 txt-charcoal mb2":!a&&e.displayType==g.c.Talent})};return r.createElement("div",{id:"credentialsComponent",className:u()({"border--bottom":![g.c.AdvertiserPlaceListing,g.c.WhiteLabel].includes(e.displayType)})},t.isBackstageAuthenticated&&r.createElement("div",{className:"pb4"},r.createElement("span",{className:"f7"},"Signing up with "),r.createElement("span",{className:"fw7 break-long-words"},t.emailAddress),r.createElement("a",{className:"ml2",onClick:M},"change")),!1===t.isBackstageAuthenticated&&r.createElement("div",null,r.createElement("div",null,r.createElement("fieldset",{className:u()("fieldset","pb2","pt2",{"field-validation-error":e.displayType!==g.c.AdvertiserPlaceListing&&I()})},r.createElement("label",{className:B()},v.d[e.displayType],r.createElement("span",{className:"req pl1"},"*"),r.createElement(m.default,{infoPopupText:"Your email address is never made public",className:"ml1",iconClassName:"mb1",inline:!0})),r.createElement("div",{className:O("relative")},r.createElement("input",{name:"EmailField",placeholder:"Email address",onChange:function(a){e.onEmailChange&&e.onEmailChange(a.target.value),C(a.target.value),x(a.target.value),s({emailAddress:a.target.value,isLoading:!1})},value:t.emailAddress,onBlur:A,type:"email",autoComplete:"email",maxLength:50,className:j(!0)}),t.isLoading&&r.createElement("div",{className:"message-search__spinner"},r.createElement(c.a,null))),I()&&r.createElement(N,{error:t.emailError,validateEmail:A,currentPage:e.displayType})),t.emailError===g.d.ValidEmail&&r.createElement("fieldset",{className:u()("fieldset","pb2",{"field-validation-error":e.displayType!==g.c.AdvertiserPlaceListing&&t.hasPasswordError})},r.createElement("label",{className:B()},"Choose a password ",r.createElement("span",{className:"req"},"*")),r.createElement("p",{className:B(!0)},"At least 8 characters with at least 1 number and letter"),r.createElement("div",{className:O("relative")},r.createElement("input",{name:"PasswordField",placeholder:"Password",onChange:function(a){e.onPasswordChange&&e.onPasswordChange(a.target.value),s({password:a.target.value})},value:t.password,onBlur:k,type:p?"text":"password",maxLength:64,className:j(!1)}),r.createElement("span",{className:"password-visibility",onClick:function(){E(!p)}},p?"Hide":"Show")),t.hasPasswordError&&r.createElement("div",null,r.createElement(i.b,{errorMessage:"Your password doesn't meet the below requirement(s):"}),r.createElement(w.a,{validationErrors:t.passwordValidationResult}))),e.displayRememberMe&&t.emailError===g.d.ValidEmail&&r.createElement("fieldset",{className:"fieldset pb3 pt1"},r.createElement("label",{className:"checkbox",htmlFor:"rememberMeControl"},r.createElement("input",{id:"rememberMeControl",name:"rememberMeControl",type:"checkbox",defaultChecked:e.rememberMe}),"Keep me signed in")),t.openSignInModal&&r.createElement(h,{onRequestClose:M,onSuccessfulAuthentication:function(a,t,n){Object(b.a)(),s({password:a,isBackstageAuthenticated:!0}),e.onPasswordChange&&e.onPasswordChange(a),e.onBackstageIntegrationChange&&e.onBackstageIntegrationChange(!0,t,n),Object(b.c)(t,n)},starNowApiUrl:e.global.starNowApiUrl,emailAddress:t.emailAddress,accountType:t.accountType}))),r.createElement("input",{type:"hidden",name:"Email",value:t.emailAddress}),r.createElement("input",{type:"hidden",name:"Password",value:t.password}),r.createElement("input",{type:"hidden",name:"IsBackstageAuthenticated",value:t.isBackstageAuthenticated.toString()}))},N=function(e){return r.createElement("div",{className:"error-message"},r.createElement("span",null,e.error===g.d.EmailIsTaken&&r.createElement(i.b,{errorTextClassName:"txt-red",errorMessage:i.a,edgeCaseValue:function(){if(e.currentPage==g.c.WhiteLabel){var a=new URLSearchParams(window.location.search).get("return_url");return"/listing/signin/"+(null!=a?"?return_url="+encodeURIComponent(a):"")}return e.currentPage==g.c.PlaceNotice?"/signin/?return_url="+encodeURIComponent("/noticeboard/placenotice/"):e.currentPage==g.c.Talent?"/signin/":void 0}()}),e.error===g.d.InvalidEmail&&r.createElement(i.b,{errorTextClassName:"txt-red",errorMessage:"Email address is not valid"}),e.error===g.d.InvalidConnection&&r.createElement("div",{className:"flex flex-row items-center"},r.createElement(i.b,{errorTextClassName:"txt-red",errorMessage:"The provided credentials are not valid."}),r.createElement("a",{className:"f8 mt1 ml1",onClick:e.validateEmail},"Retry"))))};a.default=y,Object(s.a)(y,"CredentialsComponent")},63:function(e,a,t){"use strict";var n=t(0),r=t(3),s=t.n(r),i=t(6),l=t(35);a.a=function(e){var a,t,r=e.isSubmit?i.c:i.d;return n.createElement(r,{className:s()("w-100 w-auto-ns f6 pv2 ph3",e.className),colour:(a=e.buttonColour,null!=a?a:i.a.Charcoal),onClick:e.onClick,disabled:e.isDisabled,tabIndex:e.tabIndex},e.isLoading?n.createElement("div",{style:{marginTop:"5px",marginBottom:"5px"}},n.createElement(l.a,{backgroundColour:[255,255,255]})):n.createElement(n.Fragment,null,null!=(t=e.label)?t:"Next"," ",!e.hideArrow&&n.createElement("span",{className:"fw4 mb1"},"‚ùØ")))}},90:function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"a",(function(){return c})),t.d(a,"c",(function(){return d}));var n,r,s,i=t(13),l=((n={})[i.c.Default]="Email address",n[i.c.Talent]="What's your email address?",n[i.c.AdvertiserPlaceListing]="Email address",n[i.c.WhiteLabel]="Email address",n[i.c.PlaceNotice]="Email address",n),o=((r={})[i.a.Backstage]="Backstage",r[i.a.Mandy]="Mandy",r[i.a.BackstageMandy]="Backstage & Mandy",r[i.a.Unknown]="",r),c=((s={})[i.a.Backstage]=" and Backstage",s[i.a.Mandy]=" and Mandy",s[i.a.BackstageMandy]=", Backstage, and Mandy",s[i.a.Unknown]="",s),d=new Map([[i.e.NotLongEnough,"At least 8 characters"],[i.e.NotEnoughLetter,"Contains at least one letter"],[i.e.NotEnoughNumericalChars,"Contains at least 1 number"],[i.e.WasCommonPassword,"Cannot be from a list of most common passwords"],["New password must be at least 8 characters","At least 8 characters"]]);a.d=l}},[[1388,1,2,0]]]);
//# sourceMappingURL=credentialsComponent.js.map?x=ef8dc19defd2a20938d6;